# Отчет: Парсер учебного конфигурационного языка

## Описание
Проект представляет собой парсер для учебного конфигурационного языка, написанный на Python. Программа считывает конфигурацию из стандартного ввода, парсит её согласно заданной грамматике и сохраняет результат в JSON-файл.

## Основные возможности
1. **Объявление констант** с помощью ключевого слова `var`
2. **Поддерживаемые типы данных**:
   - Целые и дробные числа (включая экспоненциальную запись)
   - Массивы значений
   - Константные выражения
3. **Математические операции**: сложение (`+`)
4. **Встроенные функции**:
   - `min()` - поиск минимального значения среди чисел и массивов
   - `concat()` - конкатенация массивов и значений
5. **Комментарии**: многострочные комментарии в формате `<!-- комментарий -->`
6. **Имена констант**: только заглавные латинские буквы (`[A-Z]+`)

## Грамматика языка
```
program     = (var_decl | expression)*
var_decl    = "var" NAME value
expression  = const_expression | value
value       = number | array | const_expression
const_expression = "{" expression "}"
array       = "'(" value* ")"
number      = -?(\d+\.?\d*|\.\d+)([eE][-+]?\d+)?
```

## Использование
```bash
# Базовое использование
python main.py -o output.json < input.txt

# Пример с передачей конфигурации напрямую
echo "var PI 3.14" | python parser.py -o config.json
```

## Примеры работы

### Пример 1: Простые константы
**Входные данные:**
```
var A 10
var B 20
{ A + B }
```

**Результат (output.json):**
```json
{
  "A": 10,
  "B": 20,
  "_result": 30
}
```

### Пример 2: Массивы и функции
**Входные данные:**
```
var ARR1 '( 1 2 3 )
var ARR2 '( 4 5 )
{ concat(ARR1, ARR2, 6) }
```

**Результат:**
```json
{
  "ARR1": [1, 2, 3],
  "ARR2": [4, 5],
  "_result": [1, 2, 3, 4, 5, 6]
}
```

### Пример 3: Функция min()
**Входные данные:**
```
var A 5
var B 3
var MINIMUM {min(A, B)}
```

**Результат:**
```json
{
  "A": 15,
  "B": 8,
  "MINIMUM": 3
}
```

### Пример 4: Только выражение без констант
**Ввод:**
```
{ 5 + 3.14 + 2e2 }
```

**Вывод:**
```json
{
  "_result": 208.14
}
```

### Пример описания конфигураций из разных предметных областей
#### Параметры персонажа
**Ввод:**
````
python main.py -o output.json << 'EOF'
<!-- Параметры персонажа -->
var BASEHEALTH 100
var BONUSHEALTH 25
var HEALTH {BASEHEALTH + BONUSHEALTH}
var SKILLS '( 10 15 20 )
var BUFFS '( 5 10 )
var ALLBONUSES {concat(SKILLS, BUFFS)}
EOF
````

**Вывод (output.json):**
```json
{
  "BASEHEALTH": 100,
  "BONUSHEALTH": 25,
  "HEALTH": 125,
  "SKILLS": [10, 15, 20],
  "BUFFS": [5, 10],
  "ALLBONUSES": [10, 15, 20, 5, 10]
}
```

#### Конфигурация веб-сервера
**Ввод:**
````
python main.py -o output.json << 'EOF'
<!-- Конфигурация веб-сервера -->
var PORT 8080
var MAXCONN 100
var TIMEOUT 30
var MINTHREADS 4
var MAXTHREADS 16
var THREADS {min(MAXCONN, MAXTHREADS)}
EOF
````
**Вывод (output.json):**
```json
{
  "PORT": 8080,
  "MAXCONN": 100,
  "TIMEOUT": 30,
  "MINTHREADS": 4,
  "MAXTHREADS": 16,
  "THREADS": 16
}
```

## Обработка ошибок
Программа корректно обрабатывает:
- Синтаксические ошибки в конфигурации
- Неопределённые константы
- Неправильно закрытые скобки и комментарии
- Ошибки в формате чисел

## Структура проекта
- `ConfigParser` - основной класс парсера
- Рекурсивный спуск для разбора выражений
- Поддержка инфиксных операций
- Контекст хранения констант
